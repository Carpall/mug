use "csl.mug";
use "bag.mug";

define type env = "valuetype [mscorlib]System.Enviroment";
define name ios = "[mscorlib]System.IO";

func error(err: str, arg: str): ? {
	io::println("{0}: `{1}`", [err, arg]);
	end(1);
}

func ls(path: str): ? {
	for dir: str in ios::Directory::GetDirectories(path) {
		ctrl::setfg(ctrl::col::DarkYellow);
		io::println(ios::Path::GetFileName(path));
	}
	for file: str in ios::Directory::GetFiles(p) {
		ctrl::setfg(ctrl::col::DarkGreen);
		io::println(ios::Path::GetFileName(path));
	}
}

func main(args: str[]): ? {
	if args.Lenght == 0 {
		ls(".");
		end(0);
	}
	for arg: str in args {
		if !ios::Path::Exists(arg) {
			error("Invalid Path", arg)
		}
		ls(arg);
	}
	end(0);
}
func end(code: i32): ? {
	ctrl::rescol();
	env::Exit(code);
}